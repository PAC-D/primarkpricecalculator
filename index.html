<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carton Price Calculator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #0ea5e9;
            /* Sky 500 */
            --primary-dark: #0284c7;
            /* Sky 600 */
            --secondary: #6366f1;
            /* Indigo 500 */
            --accent: #10b981;
            /* Emerald 500 */
            --bg-color: #f8fafc;
            --card-bg: rgba(255, 255, 255, 0.95);
            --text-main: #0f172a;
            --text-muted: #64748b;
            --border-color: #e2e8f0;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            --radius-lg: 1rem;
            --radius-xl: 1.5rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Outfit', sans-serif;
            background-color: #f1f5f9;
            background-image:
                radial-gradient(at 0% 0%, hsla(253, 16%, 7%, 1) 0, transparent 50%),
                radial-gradient(at 50% 0%, hsla(225, 39%, 30%, 1) 0, transparent 50%),
                radial-gradient(at 100% 0%, hsla(339, 49%, 30%, 1) 0, transparent 50%);
            background-size: 100% 100%;
            background-attachment: fixed;
            min-height: 100vh;
            color: var(--text-main);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
        }

        .calculator-container {
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-xl);
            padding: 48px;
            max-width: 800px;
            width: 100%;
            margin-bottom: 100px;
            border: 1px solid rgba(255, 255, 255, 0.5);
            position: relative;
            overflow: hidden;
        }

        .calculator-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
        }

        h1 {
            font-size: 2.5rem;
            font-weight: 700;
            text-align: center;
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
            letter-spacing: -0.025em;
        }

        h3 {
            text-align: center;
            color: var(--text-muted);
            font-size: 0.875rem;
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            margin-bottom: 3rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
            position: relative;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-main);
            font-weight: 500;
            font-size: 0.925rem;
        }

        select,
        input[type="number"] {
            width: 100%;
            padding: 0.875rem 1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-lg);
            font-size: 1rem;
            font-family: inherit;
            color: var(--text-main);
            background-color: #fff;
            transition: all 0.2s ease;
            appearance: none;
        }

        /* Custom Dropdown Arrow */
        select {
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 0.75rem center;
            background-repeat: no-repeat;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }

        select:focus,
        input[type="number"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.1);
        }

        select:disabled,
        input[type="number"]:disabled {
            background-color: #f1f5f9;
            color: #94a3b8;
            cursor: not-allowed;
            border-color: var(--border-color);
        }

        .dimension-group {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1.25rem;
        }

        .marking-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            padding: 1.25rem;
            background: #fffbeb;
            border: 1px solid #fcd34d;
            border-radius: var(--radius-lg);
            margin-top: 0.5rem;
        }

        .marking-label {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
            color: #92400e;
            border: 1px solid transparent;
        }

        .marking-label:hover {
            background: #fff;
            border-color: #fde68a;
        }

        .marking-label input {
            width: 1.25rem;
            height: 1.25rem;
            margin-right: 0.75rem;
            accent-color: #d97706;
        }

        .calculate-btn {
            width: 100%;
            padding: 1rem;
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            font-weight: 600;
            font-size: 1.125rem;
            border: none;
            border-radius: var(--radius-lg);
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 2rem;
            box-shadow: 0 10px 15px -3px rgba(14, 165, 233, 0.3);
            letter-spacing: 0.025em;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgba(14, 165, 233, 0.4);
        }

        .results {
            margin-top: 3rem;
            padding: 2rem;
            background: linear-gradient(to bottom right, #f8fafc, #f1f5f9);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-color);
            display: none;
        }

        .results.show {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1.5rem;
            animation: fadeIn 0.5s ease-out forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-item {
            background: white;
            padding: 1.25rem;
            border-radius: 1rem;
            box-shadow: var(--shadow-sm);
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            border: 1px solid transparent;
            transition: transform 0.2s;
        }

        /* Make Total Price span full width */
        #totalPriceRow,
        #markingPriceRow {
            grid-column: span 2;
            background: linear-gradient(to right, #f0f9ff, #e0f2fe);
            border-color: #bae6fd;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
        }

        .result-item:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .result-label {
            font-size: 0.875rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        .result-value {
            font-size: 1.25rem;
            color: var(--text-main);
            font-weight: 700;
            font-feature-settings: "tnum";
        }

        #totalPriceRow .result-value,
        #markingPriceRow .result-value {
            font-size: 1.5rem;
            color: var(--primary-dark);
        }

        .custom-message {
            grid-column: span 2;
            padding: 1rem;
            background: #fef2f2;
            color: #b91c1c;
            border: 1px solid #fca5a5;
            border-radius: var(--radius-lg);
            text-align: center;
            font-weight: 600;
        }

        .logo-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            background: linear-gradient(to top, rgba(255, 255, 255, 0.8), transparent);
            pointer-events: none;
            z-index: 10;
        }

        .logo-footer img {
            height: 48px;
            width: auto;
            object-fit: contain;
            pointer-events: auto;
            transition: transform 0.3s;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        }

        .logo-footer img:hover {
            transform: scale(1.1);
        }

        @media (max-width: 640px) {
            .calculator-container {
                padding: 1.5rem;
            }

            .dimension-group {
                grid-template-columns: 1fr;
            }

            .results.show {
                grid-template-columns: 1fr;
            }

            #totalPriceRow,
            #markingPriceRow {
                grid-column: span 1;
            }

            h1 {
                font-size: 1.75rem;
            }
        }
    </style>
</head>

<body>
    <div class="calculator-container">
        <h1>Carton Price Calculator</h1>
        <h3>Only for Bangladesh (Packaging Supplier Management)</h3>

        <div class="form-group">
            <label for="flute">Flute Type</label>
            <select id="flute" onchange="updateCartonStyle()">
                <option value="">Select Flute Type</option>
                <option value="c-flute">C-Flute</option>
                <option value="bc-flute">BC-Flute</option>
            </select>
        </div>

        <div class="form-group">
            <label for="cartonStyle">Carton Style</label>
            <select id="cartonStyle" onchange="updateCartonSelection()" disabled>
                <option value="">Select Carton Style</option>
            </select>
        </div>

        <div class="form-group">
            <label for="cartonSelection">Carton Selection</label>
            <select id="cartonSelection" onchange="updateDimensions()" disabled>
                <option value="">Select Carton</option>
            </select>
        </div>

        <div class="form-group">
            <label>Dimensions (mm)</label>
            <div class="dimension-group">
                <div>
                    <label for="length">Length (L)</label>
                    <input type="number" id="length" placeholder="L" min="0" disabled>
                </div>
                <div>
                    <label for="width">Width (W)</label>
                    <input type="number" id="width" placeholder="W" min="0" disabled>
                </div>
                <div>
                    <label for="height">Height (H)</label>
                    <input type="number" id="height" placeholder="H" min="0" disabled>
                </div>
            </div>
        </div>

        <div class="form-group">
            <label for="quantity">Carton Quantity</label>
            <input type="number" id="quantity" placeholder="Enter quantity" min="1" oninput="checkQuantity()">
        </div>

        <div class="form-group" id="markingSection" style="display: none;">
            <label style="color: #b91c1c; font-weight: 700;">Carton Marking (Qty < 100)</label>
                    <div class="marking-options">
                        <label class="marking-label">
                            <input type="radio" name="marking" value="print" checked>
                            Carton Print (+ $20.00 Set-up Fee)
                        </label>
                        <label class="marking-label">
                            <input type="radio" name="marking" value="label">
                            Label Print (+ $0.06 per label)
                        </label>
                        <label class="marking-label">
                            <input type="radio" name="marking" value="none">
                            None (Print at own factory)
                        </label>
                    </div>
        </div>

        <button class="calculate-btn" onclick="calculate()">Calculate Price</button>

        <div class="results" id="results">
            <div class="result-item" id="sheetLengthRow">
                <span class="result-label">Blank Sheet Length (L):</span>
                <span class="result-value" id="sheetLength">-</span>
            </div>
            <div class="result-item" id="sheetWidthRow">
                <span class="result-label">Blank Sheet Width (W):</span>
                <span class="result-value" id="sheetWidth">-</span>
            </div>
            <div class="result-item">
                <span class="result-label">Area per Carton:</span>
                <span class="result-value" id="areaPerCarton">-</span>
            </div>
            <div class="result-item">
                <span class="result-label">Total Area:</span>
                <span class="result-value" id="totalArea">-</span>
            </div>
            <div class="result-item" id="unitPriceRow" style="display: none;">
                <span class="result-label">Unit Price per Carton:</span>
                <span class="result-value" id="unitPrice">-</span>
            </div>
            <div class="result-item" id="totalPriceRow" style="display: none;">
                <span class="result-label" id="totalPriceLabel">Total Price (LC Price):</span>
                <span class="result-value" id="totalPrice">-</span>
            </div>

            <div class="result-item" id="markingPriceRow" style="display: none;">
                <span class="result-label">Price with Carton Marking (LC Price):</span>
                <span class="result-value" id="markingPrice">-</span>
            </div>

            <div class="result-item" id="rebateRow" style="display: none;">
                <span class="result-label" id="rebateLabel">Rebates for Primark:</span>
                <span class="result-value" id="rebate">-</span>
            </div>
            <div class="result-item" id="pacdRow" style="display: none;">
                <span class="result-label" id="pacdLabel">For PacD:</span>
                <span class="result-value" id="pacd">-</span>
            </div>
            <div class="result-item" id="supplierPriceRow" style="display: none;">
                <span class="result-label">Packaging Supplier Price:</span>
                <span class="result-value" id="supplierPrice">-</span>
            </div>

            <div id="customMessage" class="custom-message" style="display: none;">
                Please contact packaging supplier for pricing
            </div>
        </div>
    </div>

    <div class="logo-footer">
        <img src="Primark-logo.png" alt="Primark Logo">
        <img src="image_a18ebf.png" alt="PacD Logo">
    </div>

    <script>
        const role = 'admin';

        const cartonData = {
            'A1': { L: 495, W: 285, H: null, unitPrice: 0.97 },
            'A2': { L: 495, W: 285, H: null, unitPrice: 0.88 },
            'A3': { L: 495, W: 285, H: null, unitPrice: 0.81 },
            'B1': { L: 595, W: 285, H: null, unitPrice: 1.10 },
            'B2': { L: 595, W: 285, H: null, unitPrice: 0.99 },
            'B3': { L: 595, W: 285, H: null, unitPrice: 0.90 },
            'C1': { L: 595, W: 325, H: null, unitPrice: 1.22 },
            'C2': { L: 595, W: 325, H: null, unitPrice: 1.10 },
            'C3': { L: 595, W: 325, H: null, unitPrice: 1.02 },
            'D1': { L: 595, W: 380, H: null, unitPrice: 1.39 },
            'D2': { L: 595, W: 380, H: null, unitPrice: 1.27 },
            'D3': { L: 595, W: 380, H: null, unitPrice: 1.18 }
        };

        const allResultRows = [
            'sheetLengthRow', 'sheetWidthRow', 'unitPriceRow', 'totalPriceRow',
            'markingPriceRow', 'rebateRow', 'pacdRow', 'supplierPriceRow'
        ];

        function clearDimensions() {
            document.getElementById('length').value = '';
            document.getElementById('width').value = '';
            document.getElementById('height').value = '';
            document.getElementById('length').disabled = true;
            document.getElementById('width').disabled = true;
            document.getElementById('height').disabled = true;
        }

        function checkQuantity() {
            const qty = parseFloat(document.getElementById('quantity').value);
            const markingSection = document.getElementById('markingSection');

            if (qty && qty < 100) {
                markingSection.style.display = 'block';
            } else {
                markingSection.style.display = 'none';
            }
        }

        function updateCartonStyle() {
            const flute = document.getElementById('flute').value;
            const cartonStyleSelect = document.getElementById('cartonStyle');
            const cartonSelectionSelect = document.getElementById('cartonSelection');

            cartonStyleSelect.innerHTML = '<option value="">Select Carton Style</option>';
            cartonSelectionSelect.innerHTML = '<option value="">Select Carton</option>';
            cartonSelectionSelect.disabled = true;

            clearDimensions();
            document.getElementById('results').classList.remove('show');

            if (flute === 'bc-flute') {
                cartonStyleSelect.innerHTML += '<option value="standard">Standard Carton - Singles</option>';
                cartonStyleSelect.innerHTML += '<option value="custom">Custom Carton</option>';
                cartonStyleSelect.disabled = false;
            } else if (flute === 'c-flute') {
                cartonStyleSelect.innerHTML += '<option value="custom">Custom Carton</option>';
                cartonStyleSelect.disabled = false;
            } else {
                cartonStyleSelect.disabled = true;
            }
        }

        function updateCartonSelection() {
            const cartonStyle = document.getElementById('cartonStyle').value;
            const cartonSelectionSelect = document.getElementById('cartonSelection');

            cartonSelectionSelect.innerHTML = '<option value="">Select Carton</option>';
            cartonSelectionSelect.disabled = true;
            clearDimensions();

            document.getElementById('results').classList.remove('show');

            if (cartonStyle === 'standard') {
                const options = ['A1', 'A2', 'A3', 'B1', 'B2', 'B3', 'C1', 'C2', 'C3', 'D1', 'D2', 'D3'];
                options.forEach(opt => {
                    const data = cartonData[opt];
                    const display = `${opt} (${data.L} x ${data.W} mm)`;
                    cartonSelectionSelect.innerHTML += `<option value="${opt}">${display}</option>`;
                });
                cartonSelectionSelect.disabled = false;
            } else if (cartonStyle === 'custom') {
                cartonSelectionSelect.innerHTML += '<option value="custom">Custom Carton (Enter dimensions below)</option>';
                cartonSelectionSelect.disabled = false;
                cartonSelectionSelect.value = 'custom';
                updateDimensions();
            }
        }

        function updateDimensions() {
            const selection = document.getElementById('cartonSelection').value;
            const lengthInput = document.getElementById('length');
            const widthInput = document.getElementById('width');
            const heightInput = document.getElementById('height');

            lengthInput.value = '';
            widthInput.value = '';
            heightInput.value = '';

            if (selection === 'custom') {
                lengthInput.disabled = false;
                widthInput.disabled = false;
                heightInput.disabled = false;
            } else if (selection && cartonData[selection]) {
                const data = cartonData[selection];
                lengthInput.value = data.L || '';
                widthInput.value = data.W || '';
                heightInput.value = data.H || '';

                const isPredefined = selection && cartonData[selection];

                if (isPredefined) {
                    lengthInput.disabled = true;
                    widthInput.disabled = true;
                    heightInput.disabled = false;
                } else {
                    lengthInput.disabled = true;
                    widthInput.disabled = true;
                    heightInput.disabled = true;
                }
            } else {
                lengthInput.disabled = true;
                widthInput.disabled = true;
                heightInput.disabled = true;
            }

            document.getElementById('results').classList.remove('show');
        }

        function calculate() {
            const flute = document.getElementById('flute').value;
            const cartonStyle = document.getElementById('cartonStyle').value;
            const selection = document.getElementById('cartonSelection').value;
            const length = parseFloat(document.getElementById('length').value);
            const width = parseFloat(document.getElementById('width').value);
            const height = parseFloat(document.getElementById('height').value);
            const quantity = parseFloat(document.getElementById('quantity').value);

            if (!flute || !selection || !length || !width || !height || !quantity || quantity <= 0) {
                alert('Please fill in all dimensions, select flute/carton, and enter a valid quantity.');
                return;
            }

            checkQuantity();

            let L, W, areaPerCarton;

            if (flute === 'bc-flute') {
                L = (length + width) * 2 + 11;
                W = (height + width) - 16;
                areaPerCarton = (L * W) / 1000000;

                if (cartonStyle === 'custom') {
                    areaPerCarton = areaPerCarton * 1.1;
                }
            } else if (flute === 'c-flute') {
                L = (length + width) * 2 + 15;
                W = (width + height) - 10;
                areaPerCarton = (L * W * 1.025) / 1000000;
            } else {
                alert('Invalid Flute Type selected.');
                return;
            }

            const totalArea = areaPerCarton * quantity;

            document.getElementById('sheetLength').textContent = L.toFixed(2) + ' mm';
            document.getElementById('sheetWidth').textContent = W.toFixed(2) + ' mm';
            document.getElementById('areaPerCarton').textContent = areaPerCarton.toFixed(6) + ' m²';
            document.getElementById('totalArea').textContent = totalArea.toFixed(6) + ' m²';

            allResultRows.forEach(id => {
                const element = document.getElementById(id);
                if (element) element.style.display = 'none';
            });
            document.getElementById('customMessage').style.display = 'none';

            const isCustom = selection === 'custom';

            if (!isCustom || (isCustom && flute === 'c-flute')) {
                const priceValue = isCustom ? 1.03 : cartonData[selection].unitPrice;
                let totalPrice;

                if (flute === 'bc-flute') {
                    totalPrice = quantity * priceValue;
                    document.getElementById('unitPrice').textContent = '$' + priceValue.toFixed(2);
                    document.getElementById('unitPriceRow').querySelector('.result-label').textContent = 'Unit Price:';
                } else if (flute === 'c-flute') {
                    totalPrice = totalArea * priceValue;
                    document.getElementById('unitPrice').textContent = '$' + priceValue.toFixed(2);
                    document.getElementById('unitPriceRow').querySelector('.result-label').textContent = 'SQM Price:';
                }

                const rebatePercent = flute === 'bc-flute' ? 0.05 : 0.10;
                const rebate = totalPrice * rebatePercent;

                const pacdPercent = flute === 'bc-flute' ? 0.04 : 0.075;
                const pacd = (totalPrice - rebate) * pacdPercent;

                // Calculate marking cost FIRST
                let markingCost = 0;
                if (quantity < 100) {
                    const markingType = document.querySelector('input[name="marking"]:checked').value;

                    if (markingType === 'print') {
                        markingCost = 20.00;
                    } else if (markingType === 'label') {
                        markingCost = quantity * 0.06;
                    }
                }

                // THEN calculate supplier price
                const supplierPrice = totalPrice - rebate - pacd + markingCost;

                // Update labels
                document.getElementById('rebateLabel').textContent = `Rebates for Primark (${rebatePercent * 100}%):`;
                document.getElementById('pacdLabel').textContent = `For PacD (${pacdPercent * 100}%):`;

                // Update all price displays
                document.getElementById('totalPrice').textContent = '$' + totalPrice.toFixed(2);
                document.getElementById('rebate').textContent = '$' + rebate.toFixed(2);
                document.getElementById('pacd').textContent = '$' + pacd.toFixed(2);
                document.getElementById('supplierPrice').textContent = '$' + supplierPrice.toFixed(2);

                // Handle marking price display and update labels
                let showMarkingRow = false;
                if (quantity < 100) {
                    const markingType = document.querySelector('input[name="marking"]:checked').value;
                    const priceWithMarking = totalPrice + markingCost;
                    document.getElementById('markingPrice').textContent = '$' + priceWithMarking.toFixed(2);

                    if ((role === 'admin' || role === 'garment_supplier') && markingType !== 'none') {
                        document.getElementById('markingPriceRow').style.display = 'flex';
                        showMarkingRow = true;
                    }
                }

                // Update Total Price label based on marking row visibility
                if (showMarkingRow) {
                    document.getElementById('totalPriceLabel').textContent = 'Total Price:';
                } else {
                    document.getElementById('totalPriceLabel').textContent = 'Total Price (LC Price):';
                }

                // Show/hide rows based on role
                if (role === 'admin') {
                    document.getElementById('unitPriceRow').style.display = 'flex';
                    document.getElementById('totalPriceRow').style.display = 'flex';
                    document.getElementById('rebateRow').style.display = 'flex';
                    document.getElementById('pacdRow').style.display = 'flex';
                    document.getElementById('supplierPriceRow').style.display = 'flex';
                } else if (role === 'garment_supplier') {
                    document.getElementById('totalPriceRow').style.display = 'flex';
                } else if (role === 'packaging_supplier') {
                    document.getElementById('supplierPriceRow').style.display = 'flex';
                }

                document.getElementById('results').children[2].style.display = 'flex';
                document.getElementById('results').children[3].style.display = 'flex';

            } else {
                document.getElementById('customMessage').style.display = 'block';
                document.getElementById('results').children[2].style.display = 'flex';
                document.getElementById('results').children[3].style.display = 'flex';
            }

            const showSheetDimensions = role === 'admin';
            document.getElementById('sheetLengthRow').style.display = showSheetDimensions ? 'flex' : 'none';
            document.getElementById('sheetWidthRow').style.display = showSheetDimensions ? 'flex' : 'none';

            document.getElementById('results').classList.add('show');
        }
    </script>
</body>

</html>