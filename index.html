<!DOCTYPE html>
<html lang="en">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Carton Price Calculator</title>
Â  Â  <style>
Â  Â  Â  Â  * {
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  box-sizing: border-box;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .calculator-container {
Â  Â  Â  Â  Â  Â  background: white;
Â  Â  Â  Â  Â  Â  border-radius: 20px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 20px 60px rgba(0,0,0,0.3);
Â  Â  Â  Â  Â  Â  padding: 40px;
Â  Â  Â  Â  Â  Â  max-width: 600px;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  h1 {
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  margin-bottom: 30px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  font-size: 28px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .form-group {
Â  Â  Â  Â  Â  Â  margin-bottom: 25px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  label {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  margin-bottom: 8px;
Â  Â  Â  Â  Â  Â  color: #555;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  select, input[type="number"] {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 12px 15px;
Â  Â  Â  Â  Â  Â  border: 2px solid #e0e0e0;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  font-size: 16px;
Â  Â  Â  Â  Â  Â  transition: all 0.3s ease;
Â  Â  Â  Â  Â  Â  background: white;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  select:disabled, input[type="number"]:disabled {
Â  Â  Â  Â  Â  Â  background: #f5f5f5;
Â  Â  Â  Â  Â  Â  cursor: not-allowed;
Â  Â  Â  Â  Â  Â  color: #999;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  select:focus, input[type="number"]:focus {
Â  Â  Â  Â  Â  Â  outline: none;
Â  Â  Â  Â  Â  Â  border-color: #667eea;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .dimension-group {
Â  Â  Â  Â  Â  Â  display: grid;
Â  Â  Â  Â  Â  Â  grid-template-columns: repeat(3, 1fr);
Â  Â  Â  Â  Â  Â  gap: 15px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .calculate-btn {
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  border: none;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  font-size: 18px;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: transform 0.2s ease, box-shadow 0.2s ease;
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .calculate-btn:hover {
Â  Â  Â  Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .calculate-btn:active {
Â  Â  Â  Â  Â  Â  transform: translateY(0);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .results {
Â  Â  Â  Â  Â  Â  margin-top: 30px;
Â  Â  Â  Â  Â  Â  padding: 25px;
Â  Â  Â  Â  Â  Â  background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
Â  Â  Â  Â  Â  Â  border-radius: 15px;
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .results.show {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  animation: slideIn 0.5s ease;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  @keyframes slideIn {
Â  Â  Â  Â  Â  Â  from {
Â  Â  Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  Â  Â  transform: translateY(20px);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  to {
Â  Â  Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  Â  Â  Â  Â  transform: translateY(0);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .result-item {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  justify-content: space-between;
Â  Â  Â  Â  Â  Â  padding: 12px 0;
Â  Â  Â  Â  Â  Â  border-bottom: 1px solid rgba(0,0,0,0.1);
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .result-item:last-child {
Â  Â  Â  Â  Â  Â  border-bottom: none;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .result-label {
Â  Â  Â  Â  Â  Â  color: #555;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .result-value {
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  font-weight: 500;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .custom-message {
Â  Â  Â  Â  Â  Â  color: #e74c3c;
Â  Â  Â  Â  Â  Â  font-weight: 600;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  background: #ffe5e5;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <div class="calculator-container">
Â  Â  Â  Â  <h1>ğŸ­ Carton Price Calculator</h1>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label for="flute">Flute Type</label>
Â  Â  Â  Â  Â  Â  <select id="flute" onchange="updateCartonStyle()">
Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Select Flute Type</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="c-flute">C-Flute</option>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="bc-flute">BC-Flute</option>
Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label for="cartonStyle">Carton Style</label>
Â  Â  Â  Â  Â  Â  <select id="cartonStyle" onchange="updateCartonSelection()" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Select Carton Style</option>
Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label for="cartonSelection">Carton Selection</label>
Â  Â  Â  Â  Â  Â  <select id="cartonSelection" onchange="updateDimensions()" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  <option value="">Select Carton</option>
Â  Â  Â  Â  Â  Â  </select>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label>Dimensions (mm)</label>
Â  Â  Â  Â  Â  Â  <div class="dimension-group">
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="length" style="font-size: 12px; margin-bottom: 5px;">Length (L)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="length" placeholder="L" min="0" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="width" style="font-size: 12px; margin-bottom: 5px;">Width (W)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="width" placeholder="W" min="0" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <label for="height" style="font-size: 12px; margin-bottom: 5px;">Height (H)</label>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <input type="number" id="height" placeholder="H" min="0" disabled>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="form-group">
Â  Â  Â  Â  Â  Â  <label for="quantity">Carton Quantity</label>
Â  Â  Â  Â  Â  Â  <input type="number" id="quantity" placeholder="Enter quantity" min="1">
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <button class="calculate-btn" onclick="calculate()">Calculate</button>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="results" id="results">
Â  Â  Â  Â  Â  Â  <div class="result-item" id="sheetLengthRow">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-label">Blank Sheet Length (L):</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-value" id="sheetLength">-</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="result-item" id="sheetWidthRow">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-label">Blank Sheet Width (W):</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-value" id="sheetWidth">-</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="result-item">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-label">Area per Carton:</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-value" id="areaPerCarton">-</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="result-item">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-label">Total Area:</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-value" id="totalArea">-</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="result-item" id="unitPriceRow" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-label">SQM Price:</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-value" id="unitPrice">-</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="result-item" id="totalPriceRow" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-label">Total Price (LC Price):</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-value" id="totalPrice">-</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="result-item" id="rebateRow" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-label">Rebates for Matalan:</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-value" id="rebate">-</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="result-item" id="pacdRow" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-label">For PacD:</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-value" id="pacd">-</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="result-item" id="supplierPriceRow" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-label">Packaging Supplier Price:</span>
Â  Â  Â  Â  Â  Â  Â  Â  <span class="result-value" id="supplierPrice">-</span>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <div id="customMessage" class="custom-message" style="display: none;">
Â  Â  Â  Â  Â  Â  Â  Â  Please contact packaging supplier for pricing
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // *** EDIT THIS LINE TO CHANGE THE USER ROLE ***
Â  Â  Â  Â  // Options: 'admin', 'garment_supplier', 'packaging_supplier'
Â  Â  Â  Â  const role = 'admin'; 
Â  Â  Â  Â  // **********************************************

Â  Â  Â  Â  const cartonData = {
Â  Â  Â  Â  Â  Â  'A1': { L: 495, W: 285, H: 375, price: 0.97 },
Â  Â  Â  Â  Â  Â  'A2': { L: 495, W: 285, H: 310, price: 0.88 },
Â  Â  Â  Â  Â  Â  'A3': { L: 495, W: 285, H: 260, price: 0.81 },
Â  Â  Â  Â  Â  Â  'B1': { L: 595, W: 285, H: 375, price: 1.10 },
Â  Â  Â  Â  Â  Â  'B2': { L: 595, W: 285, H: 310, price: 0.99 },
Â  Â  Â  Â  Â  Â  'B3': { L: 595, W: 285, H: 260, price: 0.90 },
Â  Â  Â  Â  Â  Â  'C1': { L: 595, W: 325, H: 375, price: 1.22 },
Â  Â  Â  Â  Â  Â  'C2': { L: 595, W: 325, H: 310, price: 1.10 },
Â  Â  Â  Â  Â  Â  'C3': { L: 595, W: 325, H: 260, price: 1.02 },
Â  Â  Â  Â  Â  Â  'D1': { L: 595, W: 380, H: 375, price: 1.39 },
Â  Â  Â  Â  Â  Â  'D2': { L: 595, W: 380, H: 310, price: 1.27 },
Â  Â  Â  Â  Â  Â  'D3': { L: 595, W: 380, H: 260, price: 1.18 },
Â  Â  Â  Â  Â  Â  'R-FPA': { L: 495, W: 285, H: null, price: 1.03 },
Â  Â  Â  Â  Â  Â  'R-FPB': { L: 595, W: 285, H: null, price: 1.03 },
Â  Â  Â  Â  Â  Â  'R-FPC': { L: 595, W: 325, H: null, price: 1.03 },
Â  Â  Â  Â  Â  Â  'R-FPD': { L: 595, W: 380, H: null, price: 1.03 }
Â  Â  Â  Â  };

Â  Â  Â  Â  const allResultRows = [
Â  Â  Â  Â  Â  Â  'sheetLengthRow', 'sheetWidthRow', 'unitPriceRow', 'totalPriceRow',
Â  Â  Â  Â  Â  Â  'rebateRow', 'pacdRow', 'supplierPriceRow'
Â  Â  Â  Â  ];

Â  Â  Â  Â  function clearDimensions() {
Â  Â  Â  Â  Â  Â  // Clear and disable dimensions
Â  Â  Â  Â  Â  Â  document.getElementById('length').value = '';
Â  Â  Â  Â  Â  Â  document.getElementById('width').value = '';
Â  Â  Â  Â  Â  Â  document.getElementById('height').value = '';
Â  Â  Â  Â  Â  Â  document.getElementById('length').disabled = true;
Â  Â  Â  Â  Â  Â  document.getElementById('width').disabled = true;
Â  Â  Â  Â  Â  Â  document.getElementById('height').disabled = true;
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateCartonStyle() {
Â  Â  Â  Â  Â  Â  const flute = document.getElementById('flute').value;
Â  Â  Â  Â  Â  Â  const cartonStyleSelect = document.getElementById('cartonStyle');
Â  Â  Â  Â  Â  Â  const cartonSelectionSelect = document.getElementById('cartonSelection');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // 1. Reset lower levels
Â  Â  Â  Â  Â  Â  cartonStyleSelect.innerHTML = '<option value="">Select Carton Style</option>';
Â  Â  Â  Â  Â  Â  cartonSelectionSelect.innerHTML = '<option value="">Select Carton</option>';
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // 2. Disable dependents
Â  Â  Â  Â  Â  Â  cartonStyleSelect.disabled = true;
Â  Â  Â  Â  Â  Â  cartonSelectionSelect.disabled = true;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  clearDimensions();
Â  Â  Â  Â  Â  Â  document.getElementById('results').classList.remove('show');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (flute === 'bc-flute') {
Â  Â  Â  Â  Â  Â  Â  Â  cartonStyleSelect.innerHTML += '<option value="standard">Standard Carton - Singles</option>';
Â  Â  Â  Â  Â  Â  Â  Â  cartonStyleSelect.innerHTML += '<option value="custom">Custom Carton</option>';
Â  Â  Â  Â  Â  Â  Â  Â  cartonStyleSelect.disabled = false; // ENABLE Carton Style here
Â  Â  Â  Â  Â  Â  } else if (flute === 'c-flute') {
Â  Â  Â  Â  Â  Â  Â  Â  cartonStyleSelect.innerHTML += '<option value="ratio">Ratio Carton</option>';
Â  Â  Â  Â  Â  Â  Â  Â  cartonStyleSelect.innerHTML += '<option value="custom">Custom Carton</option>';
Â  Â  Â  Â  Â  Â  Â  Â  cartonStyleSelect.disabled = false; // ENABLE Carton Style here
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateCartonSelection() {
Â  Â  Â  Â  Â  Â  const cartonStyle = document.getElementById('cartonStyle').value;
Â  Â  Â  Â  Â  Â  const cartonSelectionSelect = document.getElementById('cartonSelection');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // 1. Reset lower levels
Â  Â  Â  Â  Â  Â  cartonSelectionSelect.innerHTML = '<option value="">Select Carton</option>';
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // 2. Disable dependents
Â  Â  Â  Â  Â  Â  cartonSelectionSelect.disabled = true;
Â  Â  Â  Â  Â  Â  clearDimensions();

Â  Â  Â  Â  Â  Â  document.getElementById('results').classList.remove('show');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (cartonStyle === 'standard') {
Â  Â  Â  Â  Â  Â  Â  Â  // Array of carton keys
Â  Â  Â  Â  Â  Â  Â  Â  const options = ['A1', 'A2', 'A3', 'B1', 'B2', 'B3', 'C1', 'C2', 'C3', 'D1', 'D2', 'D3'];
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  options.forEach(opt => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const data = cartonData[opt];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Format: A1 (L x W x H mm)
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const display = `${opt} (${data.L} x ${data.W} x ${data.H} mm)`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cartonSelectionSelect.innerHTML += `<option value="${opt}">${display}</option>`;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  cartonSelectionSelect.disabled = false; // ENABLE Carton Selection here
Â  Â  Â  Â  Â  Â  } else if (cartonStyle === 'ratio') {
Â  Â  Â  Â  Â  Â  Â  Â  const options = ['R-FPA', 'R-FPB', 'R-FPC', 'R-FPD'];
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  options.forEach(opt => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const data = cartonData[opt];
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // Format: R-FPA (L x W mm) - H is null, so it is omitted
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const display = `${opt} (${data.L} x ${data.W} mm)`;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  cartonSelectionSelect.innerHTML += `<option value="${opt}">${display}</option>`;
Â  Â  Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  Â  Â  cartonSelectionSelect.disabled = false; // ENABLE Carton Selection here
Â  Â  Â  Â  Â  Â  } else if (cartonStyle === 'custom') {
Â  Â  Â  Â  Â  Â  Â  Â  cartonSelectionSelect.innerHTML += '<option value="custom">Custom Carton (Enter dimensions below)</option>';
Â  Â  Â  Â  Â  Â  Â  Â  cartonSelectionSelect.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  cartonSelectionSelect.value = 'custom';
Â  Â  Â  Â  Â  Â  Â  Â  updateDimensions(); // Call updateDimensions immediately for custom to enable dimension fields
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  function updateDimensions() {
Â  Â  Â  Â  Â  Â  const selection = document.getElementById('cartonSelection').value;
Â  Â  Â  Â  Â  Â  const lengthInput = document.getElementById('length');
Â  Â  Â  Â  Â  Â  const widthInput = document.getElementById('width');
Â  Â  Â  Â  Â  Â  const heightInput = document.getElementById('height');
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  clearDimensions(); // Start by resetting fields to clear previous data/state
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (selection === 'custom') {
Â  Â  Â  Â  Â  Â  Â  Â  // Enable all fields for custom carton and clear values
Â  Â  Â  Â  Â  Â  Â  Â  lengthInput.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  widthInput.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  heightInput.disabled = false;
Â  Â  Â  Â  Â  Â  } else if (selection && cartonData[selection]) {
Â  Â  Â  Â  Â  Â  Â  Â  const data = cartonData[selection];
Â  Â  Â  Â  Â  Â  Â  Â  lengthInput.value = data.L || '';
Â  Â  Â  Â  Â  Â  Â  Â  widthInput.value = data.W || '';
Â  Â  Â  Â  Â  Â  Â  Â  heightInput.value = data.H || '';
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  const isRatioCarton = selection.startsWith('R-');
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  if (isRatioCarton) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // For ratio cartons: length and width locked, height editable
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lengthInput.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  widthInput.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  heightInput.disabled = false;
Â  Â  Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // For standard cartons: all fields locked and disabled
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  lengthInput.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  widthInput.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  heightInput.disabled = true;
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  document.getElementById('results').classList.remove('show');
Â  Â  Â  Â  }

Â  Â  Â  Â  function calculate() {
Â  Â  Â  Â  Â  Â  const flute = document.getElementById('flute').value;
Â  Â  Â  Â  Â  Â  const selection = document.getElementById('cartonSelection').value;
Â  Â  Â  Â  Â  Â  const length = parseFloat(document.getElementById('length').value);
Â  Â  Â  Â  Â  Â  const width = parseFloat(document.getElementById('width').value);
Â  Â  Â  Â  Â  Â  const height = parseFloat(document.getElementById('height').value);
Â  Â  Â  Â  Â  Â  const quantity = parseFloat(document.getElementById('quantity').value);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (!flute || !selection || !length || !width || !height || !quantity || quantity <= 0) {
Â  Â  Â  Â  Â  Â  Â  Â  alert('Please fill in all dimensions, select flute/carton, and enter a valid quantity.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  let L, W, areaPerCarton;

Â  Â  Â  Â  Â  Â  // --- Flute-Dependent Calculation Logic ---
Â  Â  Â  Â  Â  Â  if (flute === 'bc-flute') {
Â  Â  Â  Â  Â  Â  Â  Â  // BC-Flute Conditions: L = (length + width) *2 + 11, W = (length + width) - 16, Area = L*W*(1+10%)/1000000
Â  Â  Â  Â  Â  Â  Â  Â  L = (length + width) * 2 + 11;
Â  Â  Â  Â  Â  Â  Â  Â  W = (height + width) - 16;
Â  Â  Â  Â  Â  Â  Â  Â  areaPerCarton = (L * W) / 1000000;
Â  Â  Â  Â  Â  Â  } else if (flute === 'c-flute') {
Â  Â  Â  Â  Â  Â  Â  Â  // C-Flute Conditions: L = (length + width) * 2 + 15, W = (width + height) - 10, Area = L*W/1000000
Â  Â  Â  Â  Â  Â  Â  Â  L = (length + width) * 2 + 15;
Â  Â  Â  Â  Â  Â  Â  Â  W = (width + height) - 10;
Â  Â  Â  Â  Â  Â  Â  Â  areaPerCarton = (L * W * 1.1) / 1000000;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // Should not happen if inputs are validated, but as a fallback:
Â  Â  Â  Â  Â  Â  Â  Â  alert('Invalid Flute Type selected.');
Â  Â  Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  const totalArea = areaPerCarton * quantity;
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  document.getElementById('sheetLength').textContent = L.toFixed(2) + ' mm';
Â  Â  Â  Â  Â  Â  document.getElementById('sheetWidth').textContent = W.toFixed(2) + ' mm';
Â  Â  Â  Â  Â  Â  document.getElementById('areaPerCarton').textContent = areaPerCarton.toFixed(6) + ' mÂ²';
Â  Â  Â  Â  Â  Â  document.getElementById('totalArea').textContent = totalArea.toFixed(6) + ' mÂ²';

Â  Â  Â  Â  Â  Â  // --- Reset all price/dimension rows to hidden initially ---
Â  Â  Â  Â  Â  Â  allResultRows.forEach(id => {
Â  Â  Â  Â  Â  Â  Â  Â  const element = document.getElementById(id);
Â  Â  Â  Â  Â  Â  Â  Â  if (element) element.style.display = 'none';
Â  Â  Â  Â  Â  Â  });
Â  Â  Â  Â  Â  Â  document.getElementById('customMessage').style.display = 'none';

Â  Â  Â  Â  Â  Â  const isCustom = selection === 'custom';
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  if (!isCustom) {
Â  Â  Â  Â  Â  Â  Â  Â  const unitPrice = cartonData[selection].price;
Â  Â  Â  Â  Â  Â  Â  Â  const totalPrice = unitPrice * quantity;
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  const rebatePercent = flute === 'bc-flute' ? 0.04 : 0.10;
Â  Â  Â  Â  Â  Â  Â  Â  const rebate = totalPrice * rebatePercent;
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  const pacdPercent = flute === 'bc-flute' ? 0.05 : 0.10;
Â  Â  Â  Â  Â  Â  Â  Â  const pacd = (totalPrice - rebate) * pacdPercent;
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  const supplierPrice = totalPrice - rebate - pacd;

Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('unitPrice').textContent = '$' + unitPrice.toFixed(2);
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('totalPrice').textContent = '$' + totalPrice.toFixed(2);
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('rebate').textContent = '$' + rebate.toFixed(2) + ' (' + (rebatePercent * 100) + '%)';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('pacd').textContent = '$' + pacd.toFixed(2) + ' (' + (pacdPercent * 100) + '%)';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('supplierPrice').textContent = '$' + supplierPrice.toFixed(2);

Â  Â  Â  Â  Â  Â  Â  Â  // --- ROLE-BASED VISIBILITY CONTROL ---
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  if (role === 'admin') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('unitPriceRow').style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('totalPriceRow').style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('rebateRow').style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('pacdRow').style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('supplierPriceRow').style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  } else if (role === 'garment_supplier') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('totalPriceRow').style.display = 'flex'; 
Â  Â  Â  Â  Â  Â  Â  Â  } else if (role === 'packaging_supplier') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('supplierPriceRow').style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  Â  Â  // Area per Carton and Total Area are always shown for non-custom cartons (indexes 2 and 3)
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('results').children[2].style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('results').children[3].style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // Custom carton logic
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('customMessage').style.display = 'block';

Â  Â  Â  Â  Â  Â  Â  Â  // Area rows remain visible for custom
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('results').children[2].style.display = 'flex';
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('results').children[3].style.display = 'flex';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Sheet Dimensions are ONLY shown for Admin (regardless of custom or standard)
Â  Â  Â  Â  Â  Â  const showSheetDimensions = role === 'admin';
Â  Â  Â  Â  Â  Â  document.getElementById('sheetLengthRow').style.display = showSheetDimensions ? 'flex' : 'none';
Â  Â  Â  Â  Â  Â  document.getElementById('sheetWidthRow').style.display = showSheetDimensions ? 'flex' : 'none';
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  document.getElementById('results').classList.add('show');
Â  Â  Â  Â  }
Â  Â  </script>
</body>
</html>
